# DS-3
# Кейс 3 (УЦСБ) Обнаружение атак на завод по очистке воды

<!-- vim-markdown-toc Redcarpet -->

* [Состав команды](#состав-команды)
* [Задача](#задача)
* [Описание датасета](#описание-датасета)
* [Структура репозитория](#структура-репозитория)
* [Выводы](#выводы)

<!-- vim-markdown-toc -->

## Состав команды: 
Панфилов Евгений

Калугин Николай

Галямова Евгения

Клочков Александр

Мархай Ольга

Плюснин Олег

Название команды: Команда №10 От заката до рассвета.

[Отчетный ноутбук](Choose_a_car_profitably2.ipynb)

## Задача

https://new.skillfactory.ru/hackaton

##  Описание кейса
Кейс подготовлен Сингапурским университетом c помощью стенда для безопасной очистки воды (Secure Water Treatment, SWaT), которая является уменьшенным вариантом реального завода. Стенд работал 11 дней, из которых 7 дней прошло в нормальном режиме (без атак и сбоев), а в оставшиеся дни проводились атаки двух типов:

Кибератаки через компьютерную сеть стенда. Физические атаки, связанные с выводом из строя компонентов стенда (например, двигатель или насос).

Набор данных включает как состояние оборудования и характеристики очищаемой воды, так и сетевой трафик. Атаки в обучающем наборе данных размечены вручную. С помощью размеченных данных вам нужно научиться определять атаки для тестового набора данных.

Помогите сделать воду чистой и улучшить экологию!

## Описание датасета:
- **FIT-101** - Расходомер; Измеряет приток в резервуар сырой воды.
- **LIT-101** - Датчик уровня; Уровень бака сырой воды.
- **MV-101** - Клапан с электроприводом; Контролирует подачу воды в бак сырой воды.
- **P-101** - Насос; Перекачивает воду из резервуара сырой воды на вторую ступень.
- **P-102 (backup)** - cловарь оборудования, входящего в комплектацию
- **AIT-201** - Анализатор проводимости; Измеряет уровень NaCl.
- **AIT-202** - анализатор pH; Измеряет уровень HCl.
- **AIT-203** - анализатор ОВП; Измеряет уровень NaOCl.
- **FIT-201** - Датчик расхода; Управление дозирующими насосами.
- **MV-201** - Клапан с электроприводом; Контролирует поток воды в бак питательной воды UF.
- **P-201** - дозирующий насос; Дозировочный насос NaCl.
- **P-202 (backup)** - дозирующий насос; Дозировочный насос NaCl.
- **P-203** - дозирующий насос; Дозировочный насос HCl.
- **P-204 (backup)** - дозирующий насос; Дозировочный насос HCl.
- **P-205** - дозирующий насос; Дозировочный насос NaOCl
- **P-206 (backup)** - дозирующий насос; Дозировочный насос NaOCl.
- **DPIT-301** - Передатчик с индикацией перепада давления; Контролирует процесс обратной промывки
- **FIT-301** - Расходомер; Измеряет расход воды на этапе ультрафильтрации
- **LIT-301** - Датчик уровня; Уровень бака питательной воды UF.
- **MV-301** - Клапан с электроприводом; Контролирует процесс УФ-обратной промывки.
- **MV-302** - Клапан с электроприводом; Контролирует воду от процесса ультрафильтрации до установки дехлорирования.
- **MV-303** - Клапан с электроприводом; Управляет сливом УФ-обратной промывки.
- **MV-304** - Клапан с электроприводом; Контролирует слив УФ.
- **P-301 (backup)** - Питающий насос УФ; Перекачивает воду из бака питательной воды UF в RO
бак питательной воды через UF-фильтрацию.
- **P-302** - Питающий насос УФ; Перекачивает воду из бака питательной воды UF в RO
бак питательной воды через UF-фильтрацию.
- **AIT-401** - RO измеритель жесткости воды.
- **AIT-402** - ORP-метр; Управляет дозированием NaHSO3(P203), дозированием NaOCl
(P 205).
- **FIT-401** - датчик расхода; Управляет УФ дехлорированием.
- **LIT-401** - Датчик уровня; Уровень бака питательной воды оборотного потока.
- **P-401 (backup)** - Насос; Перекачивает воду из питательного бака обратного потока в УФ-дехлоратор.
- ** P-402** - Насос; Перекачивает воду из питательного бака обратного потока в УФ-дехлоратор.
- **P-403** - Насос бисульфата натрия
- **P-404 (backup)** - Насос бисульфата натрия
- **UV-401** - дехлоратор; Удаляет хлор из воды.
- **AIT-501** - анализатор pH обратного потока; Измеряет уровень HCl.
- **AIT-502** - анализатор ОВП подачи обратного потока; Измеряет уровень NaOCl
- **AIT-503** - Анализатор проводимости подачи обратного потока; Измеряет уровень NaCl.
- **AIT-504** - анализатор проводимости пермеата обратного потока; Измеряет уровень NaCl.
- **FIT-501** - Расходомер; Мембранный расходомер обратного потока.
- **FIT-502** - Расходомер; Расходомер пермеата обратного потока.
- **FIT-503** - Расходомер; RO Отклонить расходомер.
- **FIT-504** - Расходомер; Рециркуляционный расходомер обратного потока.
- **P-501** - Насос; Перекачивает дехлорированную воду в систему обратного потока.
- **P-502 (backup)** - Насос; Перекачивает дехлорированную воду в систему обратного потока.
- **PIT-501** - Датчик давления; Давление подачи обратного потока.
- **PIT-502** - Датчик давления; Давление пермеата обратного потока.
- **PIT-503** - Измеритель давления; Давление сброса обратного потока.
- **FIT-601** - Расходомер; Расходомер обратной промывки UF.
- **P-601** - Насос; Перекачивает воду из бака пермеата обратного осмоса в бак сырой воды
(не используется для сбора данных).
- **P-602** - Насос; Перекачивает воду из бака обратной промывки ультрафильтратом в фильтр ультрафильтрата через очастную мембрану.
- **Timestamp** - целевая переменная, признак наличия атаки


## Структура репозитория:

[Хакатон_Jane_last_version.ipynb]() - ноутбук с EDA, логистической регрессией, CatBoost 

## Выводы:
Для решения задачи классификации использовались такие модели, как:

- **LogisticRegression**
- **CatBoostClassifier**
- **Stacking - ансамблевый метод**
- **LightAutoML**
- **Нейронная сеть Sequential**

Лучшая метрика была получена у **LightAutoML**, accuracy_score - 0.999677719588259.


В качестве модели для кластеризации был использован метод **KMeans**, который в силу своих ограничений не смог сразу справиться с задачей. В качестве альтернативы можно предложить использовать спектральную кластеризацию или метод DBSCAN.

Не смотря на это была получена метрика accuracy=0.95, хоть модель и не очень хорошо распознавала атаки.

У данной модели есть потенциал для роста точности, если более избирательно подойти к оценке достаточно большого количества кластеров.
